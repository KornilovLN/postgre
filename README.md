## Ovo with QuestDB
<br>Программно-аппаратный комплекс отработки технологии
<br>получения цифровых данных с датчиков, отправки в БД
<br>и чтения данных из БД с дальнейшей обработкой. 


#### **_Тестовый стенд отработки технологий:_**
* Сбора данных контроллеров с различными датчиками
* Создания БД на удаленном сервере БД
* Отсылки данных в формате временного ряда в базу QuestDB
* Запроса и получения данных из таблиц БД QuestDB
* Вывода в терминал в текстовом виде записей из БД
* Вывода в окно WEB приложения (<url.com>:9000/view)


#### **_Состав стенда:_**

* Контроллер Arduino UNO
* Интерфейс Usart-USB
* Компьютер Banana PI (Raspberry PI 4)
* WiFi модуль
* Дисплей Acer (1920x1200; 24")
* Router Archer A7 with WiFi
* Компьютер клиента (Laptop) - потребителя данных из БД 


#### **_Программные средства разработки:_**

* Visual Studio Code
* C++ компилятор
* Make сборщик
* Python3, Pip3, Flask
* HTML, CSS, JS
* 
* Bash
* Docker, Docker-composer
* Git, GitHub


#### **_Структура работы комплекса:_**

**_Генерирующая часть_**

* Контроллер Arduino UNO опрашивает в установленном ритме датчики
    <br>Датчики: DHT11(T,H), BME280(T,H,P), DS18B20(T) (3 точки)
    <br>Статус объекта: 2 битовые переменные UNSIGNED INT
    <br>Управление устройствами (PWM): Нагрев, Яркость осв., Вентилятор
* Данные в контроллере усредняются (по необходимости) и группируются
* Собранный блок сгруппированых данных отправляется в ведущий компьютер
* Блок данных в компьютере формирует сообщение и запрос к удаленной БД
* Отправка в БД и накопление данных для следующего этапа 

**_Клиентская часть - потребитель данных из БД_**

* На компьютере работает ПО чтения и отображения данных из БД
* ПО написано на Python3 с применением Flask
* ПО работает в WEB окне браузера 
* Запрос в браузере примерно такой: **www.server.com:9000/view** 


#### **_Как запускать тестовый проект_**

- 0. Зайти в папку проекта ovo_questdb
    ```
    cd /mnt/poligon/ovo_questdb/
    ```

- 1. В папке проекта перейти в папку ovo и запустить приложение
    <br>генерирующее данные и отправляющее в ПК
    <br>Данные ПК выводит в терминал и также
    <br>отправляет серверу БД по адресу gitlab:9000 в таблицу
    <br>sensors 
    ```
    cd ovo
    ./termcomm
    ``` 

- 2. Вернуться в ovo_questdb и запустить приложение чтения
     <br>данных из базы в графическом режиме localhost:9000
     <br>Сначала запустить приложение
    ```
    ./app.py
    ```

- 3. также запустить приложение reader_sensors.py
     <br>для вывода данных в тектовом окне терминала
    ```
    ./reader_sensors.py
    ```

- 4. Или так: Сначала запустить Arduino
```
cd /mnt/poligon/ovo_questdb/
cd ovo
./termcomm
./app.py
./reader_sensors.py
```
 


